{{>page/header}}
<h1>Request Dashboard Page</h1>
<nav>
    {{#setToggleable filterByUser base="requests" user=user._id class="all-requests" text="All Requests" query=""}}{{/setToggleable}} | {{#setToggleable filterByUser base="requests" user=user._id query="status=submitted" text="Submitted Requests" class="submitted-requests"}}
    {{/setToggleable}} | {{#setToggleable filterByUser base="requests" user=user._id query="status=created" text="Created Requests" class="created-requests"}}
    {{/setToggleable}} | {{#setToggleable filterByUser base="requests" user=user._id query="status=approved" text="Approved Requests" class="approved-requests"}}
    {{/setToggleable}} | {{#setToggleable filterByUser base="requests" user=user._id query="status=denied" text="Denied Requests" class="denied-requests"}}
    {{/setToggleable}} | {{#setToggleable filterByUser base="requests" user=user._id query="status=ordered" text="Ordered Requests" class="ordered-requests"}}
    {{/setToggleable}}
    {{#checkIfApprover user}}
    <br>
    <label for="show-all">Show Only My Requests <input type="checkbox" name="show-all" id="show-all" data-clickable="toggleAllRequests" data-allow-default="true" data-user-id="{{user._id}}" {{#if filterByUser}}checked{{/if}}></label>
    {{/checkIfApprover}}
</nav>
<form action="/requests/new" method="post" class="new-request-form">
    <p class="create-instructions">Select a Vendor to create a new request:</p>
    <select name="vendorSelector" id="vendor-selector" class="vendor-selector" required>
            <option value="">Select a vendor...</option>
        {{#each vendorList.vendors}}
            <option value="{{this}}">{{this}}</option>
        {{/each}}
            <option value="">----------</option>
            <option value="create-new-vendor">Create New Vendor</option>
    </select>
    <input type="text" name="vendorName" id="vendorName" class="hidden">
    <button type="submit">Create Request</button>
</form>
{{#if data.all}}
        <section class="request-grid-container">
            {{#each data.all}} {{>request/requestSummary this}} {{/each}}
        </section>
{{else}}
<p>No requests were found that match your criteria.</p>
{{/if}}
